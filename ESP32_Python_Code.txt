import cv2
import numpy as np

def count_leds(image):
    # Convert to grayscale
    gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)

    # Apply thresholding to isolate bright spots (LEDs)
    _, threshold = cv2.threshold(gray, 200, 255, cv2.THRESH_BINARY)

    # Find contours
    contours, _ = cv2.findContours(threshold, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)

    # Filter contours based on size (LED segment size)
    led_count = 0
    for contour in contours:
        area = cv2.contourArea(contour)
        if 50 < area < 500:  # Adjust size range as needed
            led_count += 1

    return led_count

# Example usage
if _name_ == "_main_":
    image_path = "led_matrix.jpg"  # Replace with your image path
    image = cv2.imread(image_path)

    if image is not None:
         leds_on = count_leds(image)
        print(f"Number of LEDs turned on: {leds_on}")
    else:
        print("Image not found.")